# Railway Deployment - –ò–∑–º–µ–Ω–µ–Ω–∏—è –∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

## ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –∑–∞–¥–∞—á–∏

### 1. ‚úÖ –ú–∏–≥—Ä–∞—Ü–∏—è –ë–î: SQLite ‚Üí PostgreSQL

**felix_hub/backend/app.py:**
- –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∞ PostgreSQL —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–µ–π URL
- –°–æ—Ö—Ä–∞–Ω—ë–Ω fallback –Ω–∞ SQLite –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
- –î–æ–±–∞–≤–ª–µ–Ω–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è SECRET_KEY –∏–∑ environment

**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**
```python
DATABASE_URL = os.getenv('DATABASE_URL', 'sqlite:///database.db')
if DATABASE_URL.startswith('postgres://'):
    DATABASE_URL = DATABASE_URL.replace('postgres://', 'postgresql://', 1)
```

### 2. ‚úÖ –°–æ–∑–¥–∞–Ω Procfile

**–§–∞–π–ª: `Procfile`**
```
release: python felix_hub/backend/init_db.py
web: gunicorn -w 2 -b 0.0.0.0:$PORT felix_hub.backend.app:app
worker: python -m felix_hub.bot.bot
```

–¢—Ä–∏ –ø—Ä–æ—Ü–µ—Å—Å–∞:
- `release` - –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ë–î –ø—Ä–∏ –¥–µ–ø–ª–æ–µ
- `web` - Flask API —á–µ—Ä–µ–∑ gunicorn
- `worker` - Telegram –±–æ—Ç

### 3. ‚úÖ –û–±–Ω–æ–≤–ª—ë–Ω requirements.txt

**–§–∞–π–ª: `requirements.txt`** (–≤ –∫–æ—Ä–Ω–µ)
–°–æ–¥–µ—Ä–∂–∏—Ç –≤—Å–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:
- Flask 3.0.0 + Flask-SQLAlchemy 3.1.1 + Flask-CORS 4.0.0
- psycopg2-binary 2.9.9 (–¥—Ä–∞–π–≤–µ—Ä PostgreSQL)
- python-telegram-bot 21.0
- gunicorn 21.2.0 (production WSGI —Å–µ—Ä–≤–µ—Ä)
- pandas, openpyxl (—ç–∫—Å–ø–æ—Ä—Ç –≤ Excel)
- python-escpos, reportlab (–ø–µ—á–∞—Ç—å)
- python-dotenv 1.0.0

### 4. ‚úÖ Environment Variables –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

**–§–∞–π–ª: `.env.example`** (–≤ –∫–æ—Ä–Ω–µ)
–°–æ–∑–¥–∞–Ω —à–∞–±–ª–æ–Ω —Å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–µ–π –≤—Å–µ—Ö –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö:
- `TELEGRAM_TOKEN` - —Ç–æ–∫–µ–Ω Telegram –±–æ—Ç–∞
- `ADMIN_IDS` - ID –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤ —á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é
- `BACKEND_URL` - URL Railway –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- `SECRET_KEY` - —Å–µ–∫—Ä–µ—Ç–Ω—ã–π –∫–ª—é—á –¥–ª—è Flask
- `DATABASE_URL` - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—Ç Railway PostgreSQL
- `FLASK_ENV` - production/development
- `ALLOWED_ORIGINS` - CORS –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

**felix_hub/bot/config.py:**
- –î–æ–±–∞–≤–ª–µ–Ω–∞ –≤–∞–ª–∏–¥–∞—Ü–∏—è `TELEGRAM_TOKEN`
- –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∞ `ADMIN_IDS` –∏–∑ environment
- –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã—Ö –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö

### 5. ‚úÖ Production –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ Flask

**felix_hub/backend/app.py:**
- –ü–æ—Ä—Ç –±–µ—Ä—ë—Ç—Å—è –∏–∑ `$PORT` environment (Railway –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)
- Debug –æ—Ç–∫–ª—é—á–∞–µ—Ç—Å—è –≤ production (`FLASK_ENV=production`)
- CORS –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ `ALLOWED_ORIGINS`

```python
port = int(os.getenv('PORT', 5000))
debug = os.getenv('FLASK_ENV') != 'production'
app.run(host='0.0.0.0', port=port, debug=debug)
```

### 6. ‚úÖ –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ë–î

**–§–∞–π–ª: `felix_hub/backend/init_db.py`**
–°–∫—Ä–∏–ø—Ç –¥–ª—è –ø–µ—Ä–≤–æ–≥–æ –∑–∞–ø—É—Å–∫–∞:
- –°–æ–∑–¥–∞—ë—Ç –≤—Å–µ —Ç–∞–±–ª–∏—Ü—ã
- –î–æ–±–∞–≤–ª—è–µ—Ç –±–∞–∑–æ–≤—ã–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
- –ë–µ–∑–æ–ø–∞—Å–µ–Ω –¥–ª—è –ø–æ–≤—Ç–æ—Ä–Ω–æ–≥–æ –∑–∞–ø—É—Å–∫–∞
- –ó–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —á–µ—Ä–µ–∑ `release` –∫–æ–º–∞–Ω–¥—É –≤ Procfile

### 7. ‚úÖ README –æ–±–Ω–æ–≤–ª—ë–Ω

**README.md:**
–î–æ–±–∞–≤–ª–µ–Ω–∞ –Ω–æ–≤–∞—è —Å–µ–∫—Ü–∏—è "üöÄ –ë—ã—Å—Ç—Ä—ã–π –¥–µ–ø–ª–æ–π –Ω–∞ Railway.app" —Å:
- –ü–æ—à–∞–≥–æ–≤—ã–º–∏ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º–∏
- –ù–∞—Å—Ç—Ä–æ–π–∫–æ–π –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
- –û–±—ä—è—Å–Ω–µ–Ω–∏–µ–º –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –ø—Ä–æ—Ü–µ—Å—Å–∞ –¥–µ–ø–ª–æ—è
- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ –ø–æ–ª—É—á–µ–Ω–∏–∏ URL –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

### 8. ‚úÖ –ù–∞—Å—Ç—Ä–æ–π–∫–∞ CORS –¥–ª—è production

**felix_hub/backend/app.py:**
```python
ALLOWED_ORIGINS = os.getenv('ALLOWED_ORIGINS', '*').split(',')
CORS(app, origins=ALLOWED_ORIGINS)
```

–ü–æ–∑–≤–æ–ª—è–µ—Ç –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å —Ä–∞–∑—Ä–µ—à—ë–Ω–Ω—ã–µ origins —á–µ—Ä–µ–∑ environment.

### 9. ‚úÖ Health check endpoint

**felix_hub/backend/app.py:**
–î–æ–±–∞–≤–ª–µ–Ω endpoint `/health`:
```python
@app.route('/health')
def health_check():
    """Health check –¥–ª—è Railway"""
    # –ü—Ä–æ–≤–µ—Ä—è–µ—Ç —Å—Ç–∞—Ç—É—Å –ë–î
    # –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç JSON —Å timestamp
```

Railway –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —ç—Ç–æ –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.

### 10. ‚úÖ .gitignore –æ–±–Ω–æ–≤–ª—ë–Ω

–î–æ–±–∞–≤–ª–µ–Ω–æ:
- `.env.local` - –ª–æ–∫–∞–ª—å–Ω—ã–µ environment –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
- –£–∂–µ –±—ã–ª–∏: `.env`, `*.db`, `*.sqlite`, `__pycache__/`, `venv/`

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –ò–º–ø–æ—Ä—Ç—ã –º–æ–¥—É–ª–µ–π
–î–æ–±–∞–≤–ª–µ–Ω—ã `sys.path` –º–∞–Ω–∏–ø—É–ª—è—Ü–∏–∏ –¥–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–π —Ä–∞–±–æ—Ç—ã:
- `felix_hub/backend/app.py` - –¥–æ–±–∞–≤–ª—è–µ—Ç backend –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –≤ path
- `felix_hub/bot/bot.py` - –¥–æ–±–∞–≤–ª—è–µ—Ç bot –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –≤ path
- –ü–æ–∑–≤–æ–ª—è–µ—Ç –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –º–æ–¥—É–ª–∏ –∫–∞–∫ –ø—Ä–∏ –ª–æ–∫–∞–ª—å–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ, —Ç–∞–∫ –∏ —á–µ—Ä–µ–∑ gunicorn

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø–∞–∫–µ—Ç–æ–≤
–°–æ–∑–¥–∞–Ω—ã `__init__.py` —Ñ–∞–π–ª—ã:
- `felix_hub/__init__.py`
- `felix_hub/backend/__init__.py`
- `felix_hub/bot/__init__.py`

–≠—Ç–æ –¥–µ–ª–∞–µ—Ç –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ Python –ø–∞–∫–µ—Ç–∞–º–∏.

### SQLAlchemy —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å
–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π —Å–∏–Ω—Ç–∞–∫—Å–∏—Å –¥–ª—è SQLAlchemy 1.4+:
```python
from sqlalchemy import text
with db.engine.connect() as conn:
    conn.execute(text('SELECT 1'))
```

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

**–§–∞–π–ª: `test_railway_setup.py`**
–ö–æ–º–ø–ª–µ–∫—Å–Ω—ã–π —Ç–µ—Å—Ç-—Å–∫—Ä–∏–ø—Ç –ø—Ä–æ–≤–µ—Ä—è–µ—Ç:
- ‚úÖ –ù–∞–ª–∏—á–∏–µ –≤—Å–µ—Ö –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã—Ö —Ñ–∞–π–ª–æ–≤
- ‚úÖ –ò–º–ø–æ—Ä—Ç –≤—Å–µ—Ö –º–æ–¥—É–ª–µ–π
- ‚úÖ –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ –†–∞–±–æ—Ç—É health endpoint
- ‚úÖ –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—é PostgreSQL URL

–ó–∞–ø—É—Å–∫: `python test_railway_setup.py`

## üìã –ö—Ä–∏—Ç–µ—Ä–∏–∏ –ø—Ä–∏—ë–º–∫–∏ - –í–´–ü–û–õ–ù–ï–ù–û

- ‚úÖ PostgreSQL –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∞ (—Å fallback –Ω–∞ SQLite –ª–æ–∫–∞–ª—å–Ω–æ)
- ‚úÖ Procfile —Å–æ–∑–¥–∞–Ω —Å web + worker + release –ø—Ä–æ—Ü–µ—Å—Å–∞–º–∏
- ‚úÖ requirements.txt —Å–æ–¥–µ—Ä–∂–∏—Ç –≤—Å–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –≤–∫–ª—é—á–∞—è gunicorn –∏ psycopg2
- ‚úÖ Environment variables –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è —á–µ—Ä–µ–∑ python-dotenv
- ‚úÖ .env.example —Å–æ–∑–¥–∞–Ω —Å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–µ–π
- ‚úÖ init_db.py —Å–∫—Ä–∏–ø—Ç —Å–æ–∑–¥–∞–Ω –¥–ª—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏
- ‚úÖ README –æ–±–Ω–æ–≤–ª—ë–Ω —Å –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º–∏ –¥–µ–ø–ª–æ—è
- ‚úÖ CORS –Ω–∞—Å—Ç—Ä–æ–µ–Ω –ø—Ä–∞–≤–∏–ª—å–Ω–æ
- ‚úÖ Health check endpoint –¥–æ–±–∞–≤–ª–µ–Ω
- ‚úÖ .gitignore –æ–±–Ω–æ–≤–ª—ë–Ω
- ‚úÖ –ö–æ–¥ —Ä–∞–±–æ—Ç–∞–µ—Ç –ª–æ–∫–∞–ª—å–Ω–æ —Å SQLite (–¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏)
- ‚úÖ –ö–æ–¥ –≥–æ—Ç–æ–≤ –∫ –¥–µ–ø–ª–æ—é –Ω–∞ Railway —Å PostgreSQL

## üöÄ –î–µ–ø–ª–æ–π –Ω–∞ Railway - –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è

### –®–∞–≥ 1: –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞
1. –°–æ–∑–¥–∞–π—Ç–µ –∞–∫–∫–∞—É–Ω—Ç –Ω–∞ [Railway.app](https://railway.app)
2. –ü–æ–ª—É—á–∏—Ç–µ —Ç–æ–∫–µ–Ω —á–µ—Ä–µ–∑ @BotFather –≤ Telegram

### –®–∞–≥ 2: –°–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞
1. Railway Dashboard ‚Üí **New Project**
2. **Deploy from GitHub repo** ‚Üí –≤—ã–±–µ—Ä–∏—Ç–µ FelixPartsBot
3. **Add PostgreSQL** –¥–ª—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

### –®–∞–≥ 3: Environment Variables
–í Railway Dashboard ‚Üí Variables –¥–æ–±–∞–≤—å—Ç–µ:
```
TELEGRAM_TOKEN=<–≤–∞—à —Ç–æ–∫–µ–Ω>
ADMIN_IDS=<ID –∞–¥–º–∏–Ω–æ–≤ —á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é>
SECRET_KEY=<—Å–ª—É—á–∞–π–Ω–∞—è –¥–ª–∏–Ω–Ω–∞—è —Å—Ç—Ä–æ–∫–∞>
FLASK_ENV=production
```

### –®–∞–≥ 4: –î–µ–ø–ª–æ–π
Railway –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:
1. ‚úÖ –£—Å—Ç–∞–Ω–æ–≤–∏—Ç –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –∏–∑ requirements.txt
2. ‚úÖ –ó–∞–ø—É—Å—Ç–∏—Ç release –∫–æ–º–∞–Ω–¥—É (init_db.py)
3. ‚úÖ –ó–∞–ø—É—Å—Ç–∏—Ç web –∏ worker –ø—Ä–æ—Ü–µ—Å—Å—ã

### –®–∞–≥ 5: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ URL
1. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ URL –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –æ—Ç Railway
2. –î–æ–±–∞–≤—å—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é: `BACKEND_URL=<–≤–∞—à URL>`

### –ì–æ—Ç–æ–≤–æ! üéâ

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- ‚úÖ .env —Ñ–∞–π–ª—ã –Ω–µ –∫–æ–º–º–∏—Ç—è—Ç—Å—è –≤ Git
- ‚úÖ –°–µ–∫—Ä–µ—Ç–Ω—ã–µ –∫–ª—é—á–∏ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ environment
- ‚úÖ PostgreSQL credentials –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—Ç Railway
- ‚úÖ CORS –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã—Ö origins
- ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞

## üìù –õ–æ–∫–∞–ª—å–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞

–ü—Ä–æ–¥–æ–ª–∂–∞–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –∫–∞–∫ —Ä–∞–Ω—å—à–µ:

```bash
# Backend
cd felix_hub/backend
python app.py

# Bot
python -m felix_hub.bot.bot
```

–ò—Å–ø–æ–ª—å–∑—É–µ—Ç SQLite –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏, –µ—Å–ª–∏ `DATABASE_URL` –Ω–µ –∑–∞–¥–∞–Ω.

## üîÑ –û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å

- ‚úÖ –°—Ç–∞—Ä—ã–µ .env –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ —Ä–∞–±–æ—Ç–∞—é—Ç (BOT_TOKEN ‚Üí TELEGRAM_TOKEN)
- ‚úÖ –õ–æ–∫–∞–ª—å–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞ –Ω–µ –∑–∞—Ç—Ä–æ–Ω—É—Ç–∞
- ‚úÖ –°—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —Å–∫—Ä–∏–ø—Ç—ã –ø—Ä–æ–¥–æ–ª–∂–∞—é—Ç —Ä–∞–±–æ—Ç–∞—Ç—å
- ‚úÖ –í—Å–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ—Ö–æ–¥—è—Ç —É—Å–ø–µ—à–Ω–æ

---

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ì–æ—Ç–æ–≤–æ –∫ –¥–µ–ø–ª–æ—é –Ω–∞ Railway.app
