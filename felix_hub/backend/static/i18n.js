/**
 * Internationalization for Felix Hub Admin Panel
 * Supports: Russian (ru), Hebrew (he), English (en)
 */

const I18N = {
    'admin_panel_title': {
        'ru': 'ðŸ”§ Felix Hub - ÐÐ´Ð¼Ð¸Ð½-Ð¿Ð°Ð½ÐµÐ»ÑŒ',
        'he': 'ðŸ”§ Felix Hub - ×¤×× ×œ × ×™×”×•×œ',
        'en': 'ðŸ”§ Felix Hub - Admin Panel'
    },
    'total_orders': {
        'ru': 'Ð’ÑÐµÐ³Ð¾ Ð·Ð°ÐºÐ°Ð·Ð¾Ð²',
        'he': '×¡×”"×› ×”×–×ž× ×•×ª',
        'en': 'Total Orders'
    },
    'today': {
        'ru': 'Ð¡ÐµÐ³Ð¾Ð´Ð½Ñ',
        'he': '×”×™×•×',
        'en': 'Today'
    },
    'in_progress': {
        'ru': 'Ð’ Ñ€Ð°Ð±Ð¾Ñ‚Ðµ',
        'he': '×‘×ª×”×œ×™×š',
        'en': 'In Progress'
    },
    'ready': {
        'ru': 'Ð“Ð¾Ñ‚Ð¾Ð²Ñ‹',
        'he': '×ž×•×›×Ÿ',
        'en': 'Ready'
    },
    'status': {
        'ru': 'Ð¡Ñ‚Ð°Ñ‚ÑƒÑ:',
        'he': '×¡×˜×˜×•×¡:',
        'en': 'Status:'
    },
    'mechanic': {
        'ru': 'ÐœÐµÑ…Ð°Ð½Ð¸Ðº:',
        'he': '×ž×›×•× ××™:',
        'en': 'Mechanic:'
    },
    'search': {
        'ru': 'ÐŸÐ¾Ð¸ÑÐº:',
        'he': '×—×™×¤×•×©:',
        'en': 'Search:'
    },
    'reset_filters': {
        'ru': 'âŒ Ð¡Ð±Ñ€Ð¾ÑÐ¸Ñ‚ÑŒ Ñ„Ð¸Ð»ÑŒÑ‚Ñ€Ñ‹',
        'he': 'âŒ ××¤×¡ ×ž×¡× × ×™×',
        'en': 'âŒ Reset Filters'
    },
    'export_excel': {
        'ru': 'ðŸ“¤ Ð­ÐºÑÐ¿Ð¾Ñ€Ñ‚ Ð² Excel',
        'he': 'ðŸ“¤ ×™×™×¦×•× ×œ-Excel',
        'en': 'ðŸ“¤ Export to Excel'
    },
    'refresh': {
        'ru': 'ðŸ”„ ÐžÐ±Ð½Ð¾Ð²Ð¸Ñ‚ÑŒ',
        'he': 'ðŸ”„ ×¨×¢× ×Ÿ',
        'en': 'ðŸ”„ Refresh'
    },
    'order_details': {
        'ru': 'Ð”ÐµÑ‚Ð°Ð»Ð¸ Ð·Ð°ÐºÐ°Ð·Ð°',
        'he': '×¤×¨×˜×™ ×”×–×ž× ×”',
        'en': 'Order Details'
    },
    'status_new': {
        'ru': 'ÐÐ¾Ð²Ñ‹Ð¹',
        'he': '×—×“×©',
        'en': 'New'
    },
    'status_in_progress': {
        'ru': 'Ð’ Ñ€Ð°Ð±Ð¾Ñ‚Ðµ',
        'he': '×‘×ª×”×œ×™×š',
        'en': 'In Progress'
    },
    'status_ready': {
        'ru': 'Ð“Ð¾Ñ‚Ð¾Ð²',
        'he': '×ž×•×›×Ÿ',
        'en': 'Ready'
    },
    'status_delivered': {
        'ru': 'Ð’Ñ‹Ð´Ð°Ð½',
        'he': '× ×ž×¡×¨',
        'en': 'Delivered'
    },
    'delete': {
        'ru': 'Ð£Ð´Ð°Ð»Ð¸Ñ‚ÑŒ',
        'he': '×ž×—×§',
        'en': 'Delete'
    },
    'print': {
        'ru': 'ÐŸÐµÑ‡Ð°Ñ‚ÑŒ',
        'he': '×”×“×¤×¡',
        'en': 'Print'
    },
    'close': {
        'ru': 'Ð—Ð°ÐºÑ€Ñ‹Ñ‚ÑŒ',
        'he': '×¡×’×•×¨',
        'en': 'Close'
    },
    'all': {
        'ru': 'Ð’ÑÐµ',
        'he': '×”×›×œ',
        'en': 'All'
    },
    'mechanic_placeholder': {
        'ru': 'Ð˜Ð¼Ñ Ð¼ÐµÑ…Ð°Ð½Ð¸ÐºÐ°',
        'he': '×©× ×ž×›×•× ××™',
        'en': 'Mechanic name'
    },
    'search_placeholder': {
        'ru': 'VIN Ð¸Ð»Ð¸ ID',
        'he': 'VIN ××• ×ž×–×”×”',
        'en': 'VIN or ID'
    },
    'loading': {
        'ru': 'Ð—Ð°Ð³Ñ€ÑƒÐ·ÐºÐ°...',
        'he': '×˜×•×¢×Ÿ...',
        'en': 'Loading...'
    },
    'date': {
        'ru': 'Ð”Ð°Ñ‚Ð°',
        'he': '×ª××¨×™×š',
        'en': 'Date'
    },
    'category': {
        'ru': 'ÐšÐ°Ñ‚ÐµÐ³Ð¾Ñ€Ð¸Ñ',
        'he': '×§×˜×’×•×¨×™×”',
        'en': 'Category'
    },
    'vin': {
        'ru': 'VIN',
        'he': 'VIN',
        'en': 'VIN'
    },
    'parts': {
        'ru': 'Ð”ÐµÑ‚Ð°Ð»Ð¸',
        'he': '×—×œ×§×™×',
        'en': 'Parts'
    },
    'original': {
        'ru': 'ÐžÑ€Ð¸Ð³Ð¸Ð½Ð°Ð»',
        'he': '×ž×§×•×¨×™',
        'en': 'Original'
    },
    'actions': {
        'ru': 'Ð”ÐµÐ¹ÑÑ‚Ð²Ð¸Ñ',
        'he': '×¤×¢×•×œ×•×ª',
        'en': 'Actions'
    },
    'id': {
        'ru': 'ID',
        'he': '×ž×–×”×”',
        'en': 'ID'
    }
};

// Get current language from localStorage or default to Russian
let currentLang = localStorage.getItem('adminLang') || 'ru';

/**
 * Get translation by key
 * @param {string} key - Translation key
 * @returns {string} - Translated text
 */
function t(key) {
    return I18N[key]?.[currentLang] || I18N[key]?.['ru'] || key;
}

/**
 * Set interface language
 * @param {string} lang - Language code (ru, he, en)
 */
function setLanguage(lang) {
    if (!['ru', 'he', 'en'].includes(lang)) {
        console.error('Unsupported language:', lang);
        return;
    }
    
    currentLang = lang;
    localStorage.setItem('adminLang', lang);
    
    // Update active button state
    document.querySelectorAll('.lang-btn').forEach(btn => {
        btn.classList.remove('active');
    });
    document.querySelector(`[data-lang="${lang}"]`)?.classList.add('active');
    
    updateUI();
}

/**
 * Update all UI elements with translations
 */
function updateUI() {
    // Update all elements with data-i18n attribute
    document.querySelectorAll('[data-i18n]').forEach(el => {
        const key = el.getAttribute('data-i18n');
        const translation = t(key);
        
        if (el.tagName === 'INPUT' || el.tagName === 'SELECT') {
            // For inputs, update placeholder
            if (el.hasAttribute('placeholder')) {
                el.placeholder = translation;
            }
        } else if (el.tagName === 'OPTION') {
            // For options, update text content
            el.textContent = translation;
        } else {
            // For other elements, update text content
            el.textContent = translation;
        }
    });
    
    // Set text direction for Hebrew (RTL)
    const isRTL = currentLang === 'he';
    document.documentElement.setAttribute('dir', isRTL ? 'rtl' : 'ltr');
    document.documentElement.setAttribute('lang', currentLang);
    
    // Update body class for language-specific styling
    document.body.classList.remove('lang-ru', 'lang-he', 'lang-en');
    document.body.classList.add(`lang-${currentLang}`);
}

// Initialize language on page load
document.addEventListener('DOMContentLoaded', () => {
    // Set active button
    document.querySelector(`[data-lang="${currentLang}"]`)?.classList.add('active');
    updateUI();
});
